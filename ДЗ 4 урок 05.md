| задача                                                       | отметка о выполнении | комментарий                                                  |
| ------------------------------------------------------------ | -------------------- | ------------------------------------------------------------ |
| 1 создайте новый кластер PostgresSQL 13 (на выбор - GCE, CloudSQL) | +                    |                                                              |
| 2 зайдите в созданный кластер под пользователем postgres     | +                    |                                                              |
| 3 создайте новую базу данных testdb                          | +                    |                                                              |
| 4 зайдите в созданную базу данных под пользователем postgres | +                    |                                                              |
| 5 создайте новую схему testnm                                | +                    |                                                              |
| 6 создайте новую таблицу t1 с одной колонкой c1 типа integer | +                    |                                                              |
| 7 вставьте строку со значением c1=1                          | +                    |                                                              |
| 8 создайте новую роль readonly                               | +                    |                                                              |
| 9 дайте новой роли право на подключение к базе данных testdb | +                    |                                                              |
| 10 дайте новой роли право на использование схемы testnm      | +                    |                                                              |
| 11 дайте новой роли право на select для всех таблиц схемы testnm | +                    |                                                              |
| 12 создайте пользователя testread с паролем test123          | +                    |                                                              |
| 13 дайте роль readonly пользователю testread                 | +                    |                                                              |
| 14 зайдите под пользователем testread в базу данных testdb   | +                    |                                                              |
| 15 сделайте select * from t1;                                | +                    |                                                              |
| 16 получилось? (могло если вы делали сами не по шпаргалке и не упустили один существенный момент про который позже) | +                    |                                                              |
| 17 напишите что именно произошло в тексте домашнего задания  | +                    | ERROR:  permission denied for table t1                       |
| 18 у вас есть идеи почему? ведь права то дали?               | +                    |                                                              |
| 19 посмотрите на список таблиц                               | +                    |                                                              |
| 20 подсказка в шпаргалке под пунктом 20                      | +                    | Шпаргалка не сильно помогла, т.к. перед тем как сделать запрос я сменил схему testdb с public на testnm |
| 21 а почему так получилось с таблицей (если делали сами и без шпаргалки то может у вас все нормально) | +                    | потому что вероятно в ходе гуглежа я где-то ошибся в последовательности и либо не выдал разрешения на селект на все таблицы в схеме, либо сменил схему для таблицы позже. Для удоства поиска причины ошибки запустил вторую сессию по ssh |
| 22 вернитесь в базу данных testdb под пользователем postgres | +                    |                                                              |
| 23 удалите таблицу t1                                        | +                    |                                                              |
| 24 создайте ее заново но уже с явным указанием имени схемы testnm | +                    |                                                              |
| 25 вставьте строку со значением c1=1                         | +                    |                                                              |
| 26 зайдите под пользователем testread в базу данных testdb   | +                    |                                                              |
| 27 сделайте select * from testnm.t1;                         | +                    |                                                              |
| 28 получилось?                                               | +                    | нет                                                          |
| 29 есть идеи почему? если нет - смотрите шпаргалку           | +                    | к сожалению пока разбирался с проблемой пунктами выше, ища ответ в том числе в шпаргалке, уже увидел  почему |
| 30 как сделать так чтобы такое больше не повторялось? если нет идей - смотрите шпаргалку | +                    |                                                              |
| 31 сделайте select * from testnm.t1;                         | +                    |                                                              |
| 32 получилось?                                               | +                    | нет                                                          |
| 33 есть идеи почему? если нет - смотрите шпаргалку           | +                    | вероятно, потому что мы создали правило дефолтных прав уже после того, как пересоздали таблицу, и это правило будет работать только при добавлении новых объектов |
| 31 сделайте select * from testnm.t1;                         | +                    |                                                              |
| 32 получилось?                                               | +                    | да                                                           |
| 33 ура!                                                      | +                    |                                                              |
| 34 теперь попробуйте выполнить команду create table t2(c1 integer); insert into t2 values (2); | +                    |                                                              |
| 35 а как так? нам же никто прав на создание таблиц и insert в них под ролью readonly? | +                    | вероятно потому, что мы создали таблицу в схеме public, по которой у нас есть полные права |
| 36 есть идеи как убрать эти права? если нет - смотрите шпаргалку | +                    | убрать права на create для схемы public                      |
| 37 если вы справились сами то расскажите что сделали и почему, если  смотрели шпаргалку - объясните что сделали и почему выполнив указанные в ней команды | +                    | старался сам, но кое-где пришлось подглядывать ввиду не очень удобного руководства с описанием синтаксиса команд на PostgresPro, а так же возникновение проблемы, которая не предполагалась заданием |
| 38 теперь попробуйте выполнить команду create table t3(c1 integer); insert into t2 values (2); | +                    |                                                              |
| 39 расскажите что получилось и почему                        | +                    | поскольку мы забрали право на создание для роли public в схеме public, то попытка создать t3 по умолчанию создавалось бы в схеме Public, но т.к. права выше на создание забрали выше, то получили ошибку. В то же время вставка в t2 произошла, т.к. мы забирали права с базы, а не с таблицы, соответсвенно на таблице остались все права по select, insert,delete,update. |

