| задача                                                       | отметка о выполнении | комментарий                                                  |
| ------------------------------------------------------------ | -------------------- | ------------------------------------------------------------ |
| запустить нагрузочный тест pgbench с профилем нагрузки DWH   | +                    | это цель, не отделена от задач                               |
| настроить параметры autovacuum для достижения максимального уровня устойчивой производительности | +                    | это цель, не отделена от задач                               |
| создать GCE инстанс типа e2-medium и standard disk 10GB      | +                    |                                                              |
| установить на него PostgreSQL 13 с дефолтными настройками    | +                    |                                                              |
| применить параметры настройки PostgreSQL из прикрепленного к материалам занятия файла | +                    |                                                              |
| выполнить pgbench -i postgres                                | +                    | выдавались ошибки при спользовании команды: pgbench: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  role "psergey" is not permitted to log in<br />В результате пришлось создать роль psergey, дать полные права на базу postgres и открыть доступ на логин, после этого команда выполнилась, чистка старых таблиц была пропущена:<br />NOTICE:  table "pgbench_accounts" does not exist, skipping |
| запустить pgbench -c8 -P 60 -T 3600 -U postgres postgres     | +                    | так же возникли проблемы, т.к. была ошибка failed: FATAL:  Peer authentication failed for user "postgres". В результате пришлось задать пароль postgres (Так же postgres), сменить в pg_hba.conf для local all postgres c peer на md5, после этого запустился процесс |
| дать отработать до конца                                     | +                    | старт в 10:33 закончило в 11:33                              |
| зафиксировать среднее значение tps в последней ⅙ части работы | +                    | 574,84                                                       |
| а дальше настроить autovacuum максимально эффективно         | +                    | настроить - настроил, а вот максимальная эффективность - вот тут возник большой вопрос. на уроке не хватило реальных кейсов по тюнингу автовакууму, не удалось понять систему, по которой можено было бы осуществить реально полезную настройку. и плюс ещё возник вопрос относительно самого тестирования. с одноими и теми же параметрами pgbench и одинаковыми настройками автовакуума получались разные результаты, последняя 1/6 часть: 552,34 и во второй замер 513,58. среднее значение в первый тест 570,86, во второй 562,92. До этого ставил другие настройки 569,01. И как итог самыми оптимальными настройками для автовакуума для pg 14 оказались именно настройки по умалчанию, давшие 574,84. Хотелось бы как раз в будущем всё же услышать и увидеть реальные кейсы по тюнингу автовакуума. |

